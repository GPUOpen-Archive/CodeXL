#MAKE FILE FOR HSAProfileAgent

DEPTH = ../..
include $(DEPTH)/Build/Common.mk

TARGETSO = $(BACKEND_OUTPUT_DIR)/lib$(GPU_PROFILER_LIB_PREFIX)HSAProfileAgent$(TARGET_SUFFIX).so

ADDL_DEFINES = -DAMD_INTERNAL_BUILD
ADDL_CFLAGS = $(HSAFDN_CFLAGS)

INCLUDES = \
	-I. \
	-isystem$(GPU_PERF_API_DIR) \
	-isystem$(COMMON_SRC)/GPUPerfAPIUtils \
	-isystem$(CAL_DIR)/include \
	-I$(COMMON_PROJ_DIR) \
	-I$(BACKEND_COMMON_DIR) \
	-I$(BACKEND_HSAFDNCOMMON_DIR) \
	-I$(HSA_DIR)/include \
	-I$(DYNAMICLIBRARYMODULE_DIR) \
	-I$(DEVICEINFO_DIR) \
	-I$(TSINGLETON_DIR) \
	-I$(AMDTMUTEX_DIR)

LIBS = \
	$(HSAFDNCOMMON_LIBS) \
	$(COMMON_LIBS) \
	$(FRAMEWORK_LIBS) \
	$(STANDARD_LIBS)

LIBPATH = $(COMMON_LIB_PATHS)

SO_OBJS = \
	./$(OBJ_DIR)/HSAPMCAgent.o \
	./$(OBJ_DIR)/HSAPMCInterceptionHelpers.o \
	./$(OBJ_DIR)/HSAPMCInterceptionTable1_0.o \
	./$(OBJ_DIR)/HSAPMCInterceptionTable1_2.o \
	./$(OBJ_DIR)/HSAGPAProfiler.o \
	./$(OBJ_DIR)/HSAPMCInterception.o \
	./$(OBJ_DIR)/CLCUInfoBase.o \
	./$(OBJ_DIR)/CLOccupancyFile.o \
	./$(OBJ_DIR)/CLOccupancyInfoManager.o \
	./$(OBJ_DIR)/ProfilerTimer.o \

include $(DEPTH)/Build/CommonTargets.mk

$(OBJ_DIR)/%.o: AutoGenerated/%.cpp
	$(BUILD_SRC)

#the following are temporary until I move the Occupancy files into a shared location
$(OBJ_DIR)/%.o: ../CLCommon/%.cpp
	$(BUILD_SRC)

# END OF MAKE FILE
